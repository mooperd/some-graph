<!doctype html>
<meta charset="utf-8">
 
<script src="http://www.d3plus.org/js/d3.js"></script>
<script src="http://www.d3plus.org/js/d3plus.js"></script>
 
<div id="viz"></div>
 
<script>

// this array sets the main systems that will always be with us
  var component_systems = [
    {"name": "Customer", "size": 10},
    {"name": "SDBS", "size": 10},
    {"name": "EBS", "size": 10},
    {"name": "IVY", "size": 10},
    {"name": "Website", "size": 10},
    {"name": "Webshop", "size": 10},
  ]

// This array describes a particular process
  var new_user = [
    {"source": "Customer", "target": "Website", "strength": "POST \n make.user(email, password )"},
    {"source": "Website", "target": "SDBS", "strength": "sod.off()"},
    {"source": "SDBS", "target": "EBS", "strength": "mr.bungle()"},
    {"source": "EBS", "target": "Customer", "strength": "wibble()"}
  ]

// This array describes another particular process
  var kill_user = [
    {"source": "IVY", "target": "Webshop", "strength": "funk"},
    {"source": "Webshop", "target": "Customer", "strength": "soul"},
    {"source": "Customer", "target": "EBS", "strength": "disco"}
  ]

// This array describes another particular process
  var screw_user = [
    {"source": "IVY", "target": "Webshop", "strength": "funk"},
    {"source": "Webshop", "target": "Customer", "strength": "soul"},
    {"source": "Customer", "target": "EBS", "strength": "disco"}
  ]

// This is where the magic happens
 var visualization = d3plus.viz()
    .id("name") // I dont understand why this has to be set.
    .container("#viz")
    .type("network") // Sets the type of visualisation
    .data(component_systems)  // define our nodes
    .edges({ // define how the nodes link together with edges 
      "label": "strength", 
      "value": new_user,
      "arrows": true
    })
    .ui([ // this ui function is meant to change the process defined in .edges but it is currently not working properly. 
      {
        "method" : "edges",
        "type" : "auto",
        "value": [{"Kill User": "new_user"}, {"New User": "kill_user"}, {"Screw User": "screw_user"} ]
      }
    ])
    .draw()

</script>
